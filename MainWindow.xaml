<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="WinUI3_SwapChainPanel_WebView2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinUI3_SwapChainPanel_WebView2"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="WinUI3_SwapChainPanel_WebView2">

    <Grid x:Name="mainGrid" >

        <!--<Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>-->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>

        <Grid.Resources>
            <local:BooleanToOpacityConverter x:Key="BooleanToOpacityConverter" />
            <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        </Grid.Resources>

        <StackPanel Orientation="Vertical" Grid.Row="0" HorizontalAlignment="Left" VerticalAlignment="Top">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">

                <Button x:Name="btnCaptureRender" Width="36" Height="34" Margin="5, 2, 0, 0" Background="MidnightBlue" 
                        Click="btnCaptureRender_Click">
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Start WebView2 capture and render&#x0a;(load/type a URL first in Text control)" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                    </ToolTipService.ToolTip>
                    <Viewbox Stretch="Uniform" Margin="-10, -12, -10, -10">
                        <TextBlock                            
                            Text="ðŸ–¼ï¸" FontFamily="Segoe UI Emoji" FontSize="20"
                            Opacity="{Binding IsEnabled, ElementName=btnCaptureRender, Converter={StaticResource BooleanToOpacityConverter}}"/>
                    </Viewbox>
                </Button>

                <ToggleSwitch x:Name="tsRender3D" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10, 2, 0, 0"
                          OffContent="2D" OnContent="3D" Toggled="tsRender3D_Toggled">
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Render content on a Direct2D device context or in Direct3D" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                    </ToolTipService.ToolTip>
                </ToggleSwitch>

                <StackPanel x:Name="sp3D" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-40, 0, 0, 0"
                            Visibility="{Binding IsOn, ElementName=tsRender3D}">

                    <ToggleSwitch x:Name="tsCube" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10, 2, 0, 0"
                                  OffContent="Deformed Paper" OnContent="Rotating Cube" IsOn="True">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Render content on sides of a cube or a paper with Direct3D" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                        </ToolTipService.ToolTip>
                    </ToggleSwitch>

                    <ToggleSwitch x:Name="tsCubeEdges" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0, 2, 0, 0"
                                  OffContent="No edges" OnContent="Edges" Visibility="{Binding IsOn, ElementName=tsCube}">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Draw cube edges" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                        </ToolTipService.ToolTip>
                    </ToggleSwitch>

                    <TextBlock Margin="10, 14, 0, 0">
                        Background
                    </TextBlock>
                    <ToggleSwitch x:Name="tsBackground" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10, 2, 0, 0"
                                  OffContent="Tunnel" OnContent="Swirl" IsOn="True">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Change background (Tunnel or colored Swirl)" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                        </ToolTipService.ToolTip>
                    </ToggleSwitch>
                    
                </StackPanel>              

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-40, 0, 0, 0"
                            Visibility="{Binding IsOn, ElementName=tsRender3D, Converter={StaticResource BooleanToVisibilityConverter}}">
                     
                    <CheckBox x:Name="cbGrayscale" VerticalContentAlignment="Center" Padding="10, 5"
                          Content="Gray scale" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbGrayscale_Checked">
                    </CheckBox>

                    <CheckBox x:Name="cbInvert" VerticalContentAlignment="Center" Padding="10, 5"
                          Content="Invert" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbInvert_Checked">
                    </CheckBox>

                    <CheckBox x:Name="cbEmboss" VerticalContentAlignment="Center" Padding="10, 5"
                          Content="Emboss" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbEmboss_Checked" >
                    </CheckBox>
                    <Slider x:Name="sliderStrengthEmboss" Height="32" Width="120" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10, 5, 10, 0"
                            TickFrequency="0.1" TickPlacement="Inline" Maximum="10" Minimum="0" StepFrequency="0.1" 
                            Value="{x:Bind StrengthEmboss, Mode=TwoWay}" Visibility="{Binding IsChecked, ElementName=cbEmboss}" >
                    </Slider>

                    <CheckBox x:Name="cbGaussianBlur" VerticalContentAlignment="Center" Padding="10, 5"
                         Content="Gaussian Blur" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbGaussianBlur_Checked" >
                    </CheckBox>
                    <Slider x:Name="sliderStandardDeviationGaussianBlur" Height="32" Width="120" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10, 5, 10, 0"
                            TickFrequency="1.0" TickPlacement="Inline" Maximum="50" Minimum="0" StepFrequency="1.0" 
                            Value="{x:Bind GaussianBlur, Mode=TwoWay}" Visibility="{Binding IsChecked, ElementName=cbGaussianBlur}" >
                    </Slider>

                    <CheckBox x:Name="cbEdgeDetection" VerticalContentAlignment="Center" Padding="10, 5"
                              Content="Edge Detection" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbEdgeDetection_Checked" >
                    </CheckBox>
                    <Slider x:Name="sliderStrengthEdgeDetection" Height="32" Width="120" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10, 5, 10, 0"
                            TickFrequency="0.1" TickPlacement="Inline" Maximum="1" Minimum="0" StepFrequency="0.1" 
                            Value="{x:Bind EdgeDetection, Mode=TwoWay}" Visibility="{Binding IsChecked, ElementName=cbEdgeDetection}" >
                    </Slider>

                    <CheckBox x:Name="cbTemperatureTint" VerticalContentAlignment="Center" Padding="10, 5"
                              Content="Temperature &amp; Tint" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="0, 5, 0, 0" Checked="cbTemperatureTint_Checked" >
                    </CheckBox>
                    <Slider x:Name="sliderTemperature" Height="32" Width="120" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10, 5, 10, 0"
                            TickFrequency="0.1" TickPlacement="Inline" Maximum="1" Minimum="-1" StepFrequency="0.1" 
                            Value="{x:Bind Temperature, Mode=TwoWay}" Visibility="{Binding IsChecked, ElementName=cbTemperatureTint}" >
                    </Slider>
                    <Slider x:Name="sliderTint" Height="32" Width="120" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10, 5, 10, 0"
                            TickFrequency="0.1" TickPlacement="Inline" Maximum="1" Minimum="-1" StepFrequency="0.1"
                            Value="{x:Bind Tint, Mode=TwoWay}" Visibility="{Binding IsChecked, ElementName=cbTemperatureTint}" >
                    </Slider>

                </StackPanel>

            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top">
                
                <TextBlock Margin="10, 8, 0, 0">
                        Navigate
                </TextBlock>

                <AutoSuggestBox x:Name="tbURL" KeyboardAcceleratorPlacementMode="Hidden"
                            Width="900" Margin ="10, 0, 0, 0"
                            PlaceholderText="Enter URL..."
                            QueryIcon="Globe"
                            TextChanged="tbURL_TextChanged"
                            SuggestionChosen="tbURL_SuggestionChosen"
                            QuerySubmitted="tbURL_QuerySubmitted" 
                            GotFocus="tbURL_GotFocus">
                </AutoSuggestBox>

                <Button x:Name="btnClearHistory" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10, 0, 0, 0" Width="32" Height="32"
                        Click="btnClearHistory_Click" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Clear History" Placement="Bottom" Background="LightYellow" Foreground="Black"/>
                    </ToolTipService.ToolTip>
                    <Viewbox Stretch="Uniform" StretchDirection="Both" Margin="-10, -12, -10, -10">
                        <FontIcon FontFamily="Segoe UI Emoji" FontSize="20" Glyph="&#x1F5D1;" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                    </Viewbox>
                </Button>
                
            </StackPanel>
        </StackPanel>

        <SwapChainPanel x:Name="scp1" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" Margin="10, 10, 10, 10"
                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        RenderTransformOrigin="0.5 0.5" >         
        </SwapChainPanel>

    </Grid>
</Window>
